#!/bin/bash

# header ------------------------------------------------------------------------
. $(dirname ${0})/../lib/h.sh
sp_f_load ssh

# options -----------------------------------------------------------------------
_m="default"
_f=false
while getopts lfhm: o; do
  case "$o" in
    m) _m=$OPTARG;;
    f) _f=true;;
    h) echo "Usage: ${sp_g_bn} [-f] [-m host]"; exit 1;;
    l) sp_f_ptt "${sp_g_bn}: mounted volumes"
        if test -z "${OSTYPE#darwin}"; then
          mount | grep sshfs | awk '{printf "%-32s => %s\n",$3,$1}'
        else
          mount | grep fusefs | awk '{printf "%-32s => %s\n",$3,$1}'
        fi
        echo
        exit 0
    ;;
  esac
done

# main --------------------------------------------------------------------------
sp_f_ptt "${sp_g_bn}"
sp_f_${sp_g_bn} "${_m}" ${_f}
